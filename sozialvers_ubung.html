<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Formular</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
<script>
    function berechnen() {
        if(document.getElementById("stringInput").value != "") {
            let stringInput_var = document.getElementById("stringInput").value;
            laenge_var = stringInput_var.length;
            document.getElementById("laenge").value = laenge_var;
            let ausgabe = "";
            let vers_nummer = "";
            summe = 0;
            for(i=0; i<laenge_var; i++) {
                let character_var = stringInput_var.charAt(i);
                if (!isNaN(character_var) && character_var != " ") {
                    ausgabe += character_var + '<br>';
                    vers_nummer += character_var;
                    if(i != laenge_var-1) {
                        summe += berechne_vers_nummer(vers_nummer.length-1, parseInt(character_var));
                    }
                }
            }
            prufziffer = parseInt(vers_nummer.charAt(3));
            summe_modulo11 = summe%11;
            if(summe_modulo11 == prufziffer) {
                alert("gültige Sozialversicherungsnummer!");
            }
            else {
                alert("ungültige Sozialversicherungsnummer!");
            }
            document.getElementById("character").innerHTML = vers_nummer; // für label ändern
        }
        else {
            alert("Geben Sie ein Text ein!");
        }
    }
    function berechne_vers_nummer(i, char_var) {
        result = 0;

        // const faktoren = [3,7,9,0,5,8,4,2,1,6];
        // werte = [1,2,3,7,0,1,0,1,8,0];

        // let charArray = string.split("")

        switch(i) {
            case 0:
                result = char_var*3;
            break;
            case 1:
                result = char_var*7;
            break;
            case 2:
                result = char_var*9;
            break;
            case 3:
                result = 0;
            break;
            case 4:
                result = char_var*5;
            break;
            case 5:
                result = char_var*8;
            break;
            case 6:
                result = char_var*4;
            break;
            case 7:
                result = char_var*2;
            break;
            case 8:
                result = char_var*1;
            break;
            case 9:
                result = char_var*6;
            break;
        }
        return result;
    }
</script>  
</head>
  <body>
    <div class="container">
        <h1>Formular</h1>
    <form>
        <label for="stringInput">Geben Sie ein Text ein: </label>
        <input type="text" id="stringInput" name="stringInput">
        <label for="laenge">Länge: </label>
        <input type="text" id="laenge" name="laenge" readonly><br>
    </form>
    <button type="button" onclick="berechnen()">Ok</button><br>
    <label id="character" name="character"></label>    
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
  </body>
</html>